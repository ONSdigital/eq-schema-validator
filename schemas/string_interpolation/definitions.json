{
  "$schema": "http://json-schema.org/draft-04/schema",
  "string_values": {
    "type": "object",
    "properties": {
      "placeholder": {
        "type": "string"
      },
      "value": {
        "$ref": "#/lookup_source"
      },
      "transforms": {
        "type": "array",
        "items": {
          "type": "object",
          "anyOf": [
            {
              "$ref": "transforms/format_number.json#/format_number"
            },
            {
              "$ref": "transforms/format_date.json#/format_date"
            },
            {
              "$ref": "transforms/format_date_range.json#/format_date_range"
            }
          ]
        }
      }
    },
    "additionalProperties": false,
    "required": [
      "placeholder"
    ],
    "oneOf": [
      {
        "required": [ "value" ]
      },
      {
        "required": [ "transforms" ]
      }
    ]
  },
  "value_sources": {
    "oneOf": [
      {
        "$ref": "#/value_source"
      },
      {
        "$ref": "#/chained_source"
      },
      {
        "$ref": "#/lookup_source"
      }
    ]
  },
  "value_source": {
    "type": "object",
    "properties": {
      "value": {
        "type": ["string","number","object"]
      }
    },
    "additionalProperties": false,
    "required": [
      "value"
    ]
  },
  "chained_source": {
    "type": "object",
    "properties": {
      "source": {
        "type": "string",
        "enum": [
          "previous_transform"
        ]
      }
    },
    "additionalProperties": false,
    "required": [
      "source"
    ]
  },
  "lookup_source": {
    "type": "object",
    "properties": {
      "source": {
        "type": "string",
        "enum": [
          "answers",
          "metadata",
          "collection_metadata"
        ]
      },
      "identifier": {
        "type": "string"
      }
    },
    "additionalProperties": false,
    "required": [
      "source",
      "identifier"
    ]
  }
}

